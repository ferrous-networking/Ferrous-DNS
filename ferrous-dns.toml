[server]
dns_port = 53
web_port = 8080
bind_address = "0.0.0.0"

[dns]
upstream_servers = []
query_timeout = 5
cache_enabled = true
cache_ttl = 3600
dnssec_enabled = true
default_strategy = "parallel"
cache_max_entries = 200000
cache_eviction_strategy = "hit_rate"
cache_optimistic_refresh = true
cache_min_hit_rate = 2.0
cache_min_frequency = 10
cache_min_lfuk_score = 1.5
cache_refresh_threshold = 0.75
cache_lfuk_history_size = 10
cache_batch_eviction_percentage = 0.1
cache_lazy_expiration = true
cache_compaction_interval = 300
cache_adaptive_thresholds = false
block_private_ptr = true
block_non_fqdn = true
local_domain = "lan"
conditional_forward_network = "10.0.0.0/8"
conditional_forward_router = "10.0.0.1"

[[dns.pools]]
name = "google-parallel"
strategy = "parallel"
priority = 1
servers = [
    "8.8.8.8:53",
    "8.8.4.4:53",
]

[[dns.pools]]
name = "cloudflare-balanced"
strategy = "balanced"
priority = 1
servers = [
    "1.1.1.1:53",
    "1.0.0.1:53",
]

[[dns.pools]]
name = "quad9-backup"
strategy = "failover"
priority = 2
servers = [
    "9.9.9.9:53",
    "149.112.112.112:53",
]

[dns.health_check]
enabled = true
interval_seconds = 30
timeout_ms = 2000
failure_threshold = 3
success_threshold = 2

[[dns.conditional_forwarding]]
domain = "lan"
server = "10.0.0.1:53"

[[dns.local_records]]
hostname = "viudes"
domain = "lan"
ip = "10.0.10.1"
record_type = "A"
ttl = 300

[blocking]
enabled = true
custom_blocked = []
whitelist = []

[logging]
level = "info"

[database]
path = "ferrous-dns.db"
log_queries = true
